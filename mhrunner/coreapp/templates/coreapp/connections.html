<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Connections</title>
    <script>
        function connectTeamviewer(teamviewerId) {
            var passwordField = document.getElementById("password-teamviewer-" + teamviewerId);
            var password = passwordField.value;
            var url = "clearbat://teamviewer@" + teamviewerId + ":" + password;
            window.location.href = url;
            passwordField.value = ""; // Очистка поля ввода
        }

        function connectAnydesk(anydeskId) {
            var passwordField = document.getElementById("password-anydesk-" + anydeskId);
            var password = passwordField.value;
            var url = "clearbat://anydesk@" + anydeskId + ":" + password;
            window.location.href = url;
            passwordField.value = ""; // Очистка поля ввода
        }

        function connectIiko(ipId) {
            var passwordField = document.getElementById("password-iiko-" + ipId);
            var password = passwordField.value;
            var url = "clearbat://iiko@" + ipId + ":443@MH:" + password;
            window.location.href = url;
            passwordField.value = ""; // Очистка поля ввода
        }
    </script>
</head>
<body>
    <h1>Connections</h1>
    {% for owner in owners %}
        <div class="owner-block">
            <h2>{{ owner.ownerTitle }}</h2>
            <ul>
                {% for server in owner.servers %}
                    <li>
                        DeviceName: {{ server.DeviceName }}<br>
                        <a href="{{SD_URL}}/sd/operator/#uuid:{{ server.UUID }}" target="_blank">Link to SD</a><br>
                        UniqueID: {{ server.UniqueID }}<br>

                        {% if server.cleared_ip %}
                            BackOffice:
                            <form onsubmit="connectIiko('{{ server.cleared_ip }}'); return false;">
                                <input type="password" id="password-iiko-{{ server.cleared_ip }}" placeholder="Enter password">
                                <button type="submit">Go</button>
                            </form>
                            <br>
                        {% else %}
                            IP: {{ server.IP }}<br>
                        {% endif %}

                        <a href="{{ server.CabinetLink }}" target="_blank">Partners</a><br>

                        {% if server.Teamviewer %}
                            Teamviewer: {{ server.Teamviewer }}<br>
                            <form onsubmit="connectTeamviewer('{{ server.Teamviewer }}'); return false;">
                                <input type="password" id="password-teamviewer-{{ server.Teamviewer }}" placeholder="Enter password">
                                <button type="submit">Go</button>
                            </form>
                            <br>
                        {% endif %}

                        {% if server.AnyDesk %}
                            AnyDesk: {{ server.AnyDesk }}<br>
                            <form onsubmit="connectAnydesk('{{ server.AnyDesk }}'); return false;">
                                <input type="password" id="password-anydesk-{{ server.AnyDesk }}" placeholder="Enter password">
                                <button type="submit">Go</button>
                            </form>
                            <br>
                        {% endif %}
                    </li>
                {% endfor %}
                {% for workstation in owner.workstations %}
                    <li>
                        DeviceName: {{ workstation.DeviceName }}<br>
                        <a href="{{SD_URL}}/sd/operator/#uuid:{{ workstation.UUID }}" target="_blank">Link to SD</a><br>
                        GK: {{ workstation.GK }}<br>
                        
                        {% if workstation.Teamviewer %}
                            Teamviewer: {{ workstation.Teamviewer }}<br>
                            <form onsubmit="connectTeamviewer('{{ workstation.Teamviewer }}'); return false;">
                                <input type="password" id="password-teamviewer-{{ workstation.Teamviewer }}" placeholder="Enter password">
                                <button type="submit">Go</button>
                            </form>
                            <br>
                        {% endif %}

                        {% if workstation.AnyDesk %}
                            AnyDesk: {{ workstation.AnyDesk }}<br>
                            <form onsubmit="connectAnydesk('{{ workstation.AnyDesk }}'); return false;">
                                <input type="password" id="password-anydesk-{{ workstation.AnyDesk }}" placeholder="Enter password">
                                <button type="submit">Go</button>
                            </form>
                            <br>
                        {% endif %}
                        
                        lastModifiedDate: {{ workstation.lastModifiedDate }}<br>
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endfor %}
</body>
</html>
